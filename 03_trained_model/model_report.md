# KKBox 이탈 예측 모델 리포트 (V4 & V5)

## 1. 개요 (Overview)
본 리포트는 KKBox 사용자의 이탈(Churn)을 예측하기 위해 구축된 **CatBoost 모델**의 성능과 전략을 기술합니다. 
두 가지 모델 트랙을 운영하여 **확정적 이탈(재무적 리스크)**와 **잠재적 이탈(행동적 리스크)**를 모두 포착하는 **Two-Track 전략**을 수립했습니다.

1.  **Main Model (V4)**: 결제 정보를 포함하여 이탈 확률을 정밀하게 예측 (PC Tuned).
2.  **Behavior Model (V5)**: 결제 정보를 배제하고, 오직 가입 정보와 청취 행동만으로 잠재 위기를 감지.

## 2. 모델 성능 비교 (Performance Comparison)

| 모델 버전 | 특징 (Features) | Best F1-Score | 용도 (Use Case) |
| :--- | :--- | :--- | :--- |
| **V4 (Main)** | **결제 정보(Transaction) 포함** + 행동 정보 | **0.8122** | **고위험군 확정 및 마케팅 실행**. 이탈이 임박했거나 이미 자동결제를 해지한 유저 식별. |
| **V5.2 (Safe Context)** | **안전한 결제정보(History/Context)** + 행동 정보 | **0.6960** | **고도화된 조기 경보**. 결제 상태(Status)는 모르지만, 유저의 성향(결제수단, 구독기간)과 행동 패턴으로 이탈 위험을 정교하게 예측. |
| **V5.0 (Pure Behavior)** | **모든 결제 정보 제외**, 순수 청취/가입 정보 | **0.3142** | **순수 행동 이탈**. 결제/구독 이력조차 모르는 상태에서의 순수 행동 이탈 감지 (보수적 기준). |

> **[Insight]**: V5.2는 `is_auto_renew_last`(치트키)를 쓰지 않고도 F1 0.7 수준을 달성했습니다. 이는 **"결제 수단"**과 **"구독 이력"**이 행동 데이터와 결합될 때 강력한 시너지를 낸다는 것을 증명합니다.

## 3. 피처 중요도 분석 (Feature Importance)

### A. V4 (Main Model) - 결제 중심
이탈 의사가 **결제 행동**으로 표출된 상태를 탐지합니다.
1.  **days_since_last_cancel**: 최근 취소 이력 (가장 강력)
2.  **days_since_last_payment**: 결제 공백기
3.  **is_auto_renew_last**: 자동 갱신 해지 여부

### B. V5.2 (Safe Context Model) - 행동 + 성향
결제 상태(Status)는 가리되, 유저의 성향(Context)은 활용합니다.
1.  **has_ever_cancelled**: 과거 취소 이력 (이탈 습관)
2.  **subscription_months_est**: 구독 유지 기간 (충성도)
3.  **avg_amount_per_payment**: 평균 결제 금액 (구매력)
4.  **last_payment_method**: 결제 수단 (환경적 요인)
5.  **last_active_gap**: 마지막 활동 간격 (행동 요인)

### C. V5 (Pure Behavior) - 순수 행동
결제 정보가 전혀 없을 때.
1.  **registered_via**: 가입 경로
2.  **reg_days**: 가입 기간
3.  **last_active_gap**: 활동 공백 (행동 핵심)

## 4. 통합 운영 전략 (Two-Track Strategy)

### Track 1: 응급실 (ER) - V4 모델 활용
*   **대상**: V4 모델 스코어 **0.7 이상** 유저.
*   **상태**: 이미 자동결제를 껐거나, 결제일이 지났음. 사실상 이탈 확정.
*   **액션**: 즉각적인 **Win-back 프로모션** (50% 할인 쿠폰, 컴백 이벤트) 문자/푸시 발송.

### Track 2: 건강검진 (Check-up) - V5 모델 활용
*   **대상**: V4 스코어는 낮지만(결제 유지 중), **V5 스코어가 높은** 유저.
*   **상태**: "돈은 내고 있지만 노래는 안 듣는" 상태. 조만간 이탈할 잠재 위험군.
*   **액션**: **Engagement 유도**. "요즘 인기있는 차트", "회원님이 좋아할 만한 믹스" 등 콘텐츠 추천 알림 발송. 할인보다는 서비스 효용을 다시 느끼게 하는 것이 중요.

## 5. 결론 및 향후 계획
이번 리팩토링과 실험을 통해, **단순 예측(V4)**을 넘어 **선제적 관리(V5)**가 가능한 시스템적 토대를 마련했습니다.
향후 `01_preprocessing_report`와 `02_training_report`를 참조하여 데이터 파이프라인을 자동화하면, 매일 아침 전일자 데이터를 기준으로 이탈 위험군 목록을 추출할 수 있습니다.